function CastController(){cast.receiver.logger.setLevelValue(cast.receiver.LoggerLevel.WARNING);window.castReceiverManager=cast.receiver.CastReceiverManager.getInstance();window.messageBus=window.castReceiverManager.getCastMessageBus("urn:x-cast:net.mackenzie_serres.pongcast");castReceiverManager.onReady=function(){window.castReceiverManager.setApplicationState("Ready for players...")};castReceiverManager.onSenderConnected=function(a){var b=a.senderId;console.log("Player Connected: "+b);console.log("Players Connected: "+
window.castReceiverManager.getSenders().length);var c=new ChromecastPlayer(window.court,b);window.players=[];window.players[b]=c;b=window.court.enter(c);window.messageBus.getCastChannel(a.senderId).send(b)};castReceiverManager.onSenderDisconnected=function(a){window.court.leave(window.players[a.senderId]);0==window.castReceiverManager.getSenders().length&&setTimeout(function(){window.close()},3E3)};window.messageBus.onMessage=function(a){console.log("Message ["+a.senderId+"]: "+a.data);switch(a.data){case "StartPlay":window.court.startPlay();
window.messageBus.broadcast("GAME STARTED");break;case "PausePlay":window.court.pausePlay();window.messageBus.broadcast("GAME PAUSED");break;case "MoveUp":window.players[a.senderId].updownCount++;break;case "MoveDown":window.players[a.senderId].updownCount--}};window.court.enterMessage="CONNECT TO CHROMECAST";window.court.startMessage="CLICK PLAY ICON";window.court.pausedMessage="CLICK PLAY TO RESTART";window.castReceiverManager.start({statusText:"Court is ready"})}ChromecastPlayer.prototype=new Player;
function ChromecastPlayer(a,b){Player.apply(this,a);this.name=b;this.updownCount=0}ChromecastPlayer.prototype.updatePaddle=function(){var a=-(this.paddle.defaultSpeed*this.updownCount);this.updownCount=0;return a};ChromecastPlayer.prototype.gameOver=function(a){try{var b=window.messageBus.getCastChannel(this.name);a?b.send("GAME WON"):b.send("GAME LOST")}catch(c){}};
